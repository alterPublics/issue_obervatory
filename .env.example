# =============================================================================
# The Issue Observatory — Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values.
# NEVER commit .env to version control.

# --- Database ---
DATABASE_URL=postgresql+asyncpg://observatory:observatory@localhost:5432/issue_observatory

# --- Redis ---
REDIS_URL=redis://localhost:6379/0

# --- Celery ---
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# --- Application ---
# SECURITY WARNING (BB-02): SECRET_KEY must be changed before production deployment.
# The application will reject known weak values like "change-me-in-production", "secret", "changeme".
# Generate a strong key with: openssl rand -hex 32
SECRET_KEY=REPLACE-WITH-openssl-rand-hex-32
DEBUG=true
LOG_LEVEL=INFO
CORS_ORIGINS=["http://localhost:8000"]

# --- Authentication ---
FIRST_ADMIN_EMAIL=admin@example.com
FIRST_ADMIN_PASSWORD=change-me-in-production

# --- Security (CRITICAL) ---
# SECURITY WARNING (BB-03): CREDENTIAL_ENCRYPTION_KEY must be a valid Fernet key.
# This encrypts all stored API credentials. If lost, credentials become unrecoverable.
# Generate with: python -c 'from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())'
CREDENTIAL_ENCRYPTION_KEY=REPLACE-WITH-Fernet-generate-key

# GDPR REQUIREMENT (BB-01): PSEUDONYMIZATION_SALT is required for GDPR-compliant data collection.
# The application will refuse to start without a valid salt.
# Generate a long random string (32+ characters recommended): openssl rand -hex 32
PSEUDONYMIZATION_SALT=REPLACE-WITH-openssl-rand-hex-32

# --- Object Storage (MinIO / S3) ---
# MinIO is used for database backups and optional media file archival.
# The docker-compose.yml file includes a MinIO service pre-configured with these defaults.
# Change these credentials in production and set MINIO_SECURE=true when using TLS.
MINIO_ENDPOINT=localhost:9000
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_BUCKET=observatory-backups
MINIO_SECURE=false

# --- Default Cost Tier ---
# Options: free, medium, premium
DEFAULT_COST_TIER=free

# --- Google Search APIs ---
SERPER_API_KEY=
SERPAPI_API_KEY=
GOOGLE_CUSTOM_SEARCH_API_KEY=
GOOGLE_CUSTOM_SEARCH_CX=

# --- Social Media APIs ---
BLUESKY_HANDLE=
BLUESKY_APP_PASSWORD=
REDDIT_CLIENT_ID=
REDDIT_CLIENT_SECRET=
REDDIT_USER_AGENT=IssueObservatory/1.0
TIKTOK_CLIENT_KEY=
TIKTOK_CLIENT_SECRET=
TELEGRAM_API_ID=
TELEGRAM_API_HASH=
TELEGRAM_PHONE=
YOUTUBE_API_KEY=

# --- News APIs ---
EVENT_REGISTRY_API_KEY=
GDELT_DOC_API_URL=https://api.gdeltproject.org/api/v2/doc/doc

# --- X/Twitter (Phase 2) ---
# X_BEARER_TOKEN=
# X_API_KEY=
# X_API_SECRET=

# --- Wikipedia (Phase 2.5) ---
# Wikipedia APIs are unauthenticated — only a User-Agent header is required.
# Override the default User-Agent string here (optional).
# WIKIPEDIA_USER_AGENT=IssueObservatory/1.0 (https://github.com/issue-observatory; contact@observatory.dk) python-httpx

# --- Discord (Phase 3+) ---
# Bot token from the Discord Developer Portal (discord.com/developers/applications).
# The bot must be invited to each server you want to monitor.
# Enable the MESSAGE_CONTENT privileged intent in the Developer Portal.
# Store via admin credential UI: platform="discord", credential={"bot_token": "..."}
# DISCORD_BOT_TOKEN=

# --- Twitch (Phase 3+, deferred) ---
# Application credentials from dev.twitch.tv/console/apps.
# Required for EventSub WebSocket chat streaming.
# Store via admin credential UI: platform="twitch", credential={"client_id": "...", "client_secret": "..."}
# TWITCH_CLIENT_ID=
# TWITCH_CLIENT_SECRET=

# --- VKontakte / VK (Phase 4 / Future — pending legal review) ---
# DO NOT enable without university legal review of EU sanctions implications.
# Standalone app access token from vk.com/dev.
# Store via admin credential UI: platform="vkontakte", credential={"access_token": "...", "app_id": "..."}
# VK_ACCESS_TOKEN=
