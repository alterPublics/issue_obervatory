@tailwind base;
@tailwind components;
@tailwind utilities;

/*
 * Custom component classes built on top of Tailwind utilities.
 * These are compiled by: make css
 *   (npx tailwindcss -i input.css -o app.css --minify)
 *
 * Usage: apply these classes in templates instead of repeating long
 * utility chains on every element.
 */

@layer components {
  /* ---------- Buttons ---------- */
  .btn-primary {
    @apply inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors;
  }

  .btn-secondary {
    @apply inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 text-sm font-medium rounded-md hover:bg-gray-50 disabled:opacity-50 transition-colors;
  }

  .btn-danger {
    @apply inline-flex items-center gap-2 px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md hover:bg-red-700 disabled:opacity-50 transition-colors;
  }

  .btn-ghost {
    @apply inline-flex items-center gap-2 px-3 py-1.5 text-gray-500 text-sm rounded hover:bg-gray-100 hover:text-gray-700 transition-colors;
  }

  /* ---------- Cards ---------- */
  .card {
    @apply bg-white rounded-lg shadow p-6;
  }

  .card-header {
    @apply text-sm font-semibold text-gray-900 border-b border-gray-200 pb-3 mb-4;
  }

  /* ---------- Form elements ---------- */
  .form-input {
    @apply w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent;
  }

  .form-select {
    @apply w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white;
  }

  .form-label {
    @apply block text-sm font-medium text-gray-700 mb-1;
  }

  .form-hint {
    @apply text-xs text-gray-400 mt-1;
  }

  /* ---------- Tier badges ---------- */
  .badge-free {
    @apply inline-flex px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800;
  }

  .badge-medium {
    @apply inline-flex px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800;
  }

  .badge-premium {
    @apply inline-flex px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800;
  }

  /* ---------- Status text colours ---------- */
  .status-pending   { @apply text-gray-500; }
  .status-running   { @apply text-blue-600; }
  .status-completed { @apply text-green-600; }
  .status-failed    { @apply text-red-600; }
  .status-cancelled { @apply text-gray-400; }

  /* ---------- Table utilities ---------- */
  .table-th {
    @apply text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50;
  }

  .table-td {
    @apply px-6 py-4 text-sm text-gray-700;
  }

  /* ---------- Alert / flash variants ---------- */
  .alert-info    { @apply bg-blue-50 border border-blue-300 text-blue-800 rounded-md px-4 py-3 text-sm; }
  .alert-success { @apply bg-green-50 border border-green-300 text-green-800 rounded-md px-4 py-3 text-sm; }
  .alert-warning { @apply bg-yellow-50 border border-yellow-300 text-yellow-800 rounded-md px-4 py-3 text-sm; }
  .alert-error   { @apply bg-red-50 border border-red-300 text-red-800 rounded-md px-4 py-3 text-sm; }
}

/*
 * HTMX loading indicator:
 * Elements with class `.htmx-indicator` are hidden by default.
 * HTMX adds `.htmx-request` to the element (or a parent) during a request,
 * which reveals the indicator via these rules.
 *
 * Note: The Tailwind CDN dev build handles most utilities, but these HTMX-
 * specific rules must be hand-authored since they are not Tailwind utilities.
 */
.htmx-indicator {
  display: none;
}

.htmx-request .htmx-indicator,
.htmx-request.htmx-indicator {
  display: inline-flex;
}

/*
 * Alpine.js x-cloak â€” hides elements until Alpine has initialised.
 * Without this, x-cloak elements briefly flash before Alpine removes the attr.
 */
[x-cloak] {
  display: none !important;
}
